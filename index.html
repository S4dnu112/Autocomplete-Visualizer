<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autocomplete Trie Visualization</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <!-- Load scripts in dependency order -->
    <script src="trie.js"></script>
    <script src="trie-minimized.js"></script>
    <script src="trie-visualizer.js"></script>
    <script src="app.js"></script>
</head>

<body class="bg-gray-50 text-gray-800 h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white shadow-sm z-10">
        <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold text-indigo-600">Autocomplete Visualization</h1>
                <p class="text-sm text-gray-500">Trie Data Structure with D3.js</p>
            </div>
            <div class="text-xs text-gray-400 flex gap-3">
                <div class="flex items-center"><span
                        class="w-3 h-3 rounded-full border-2 mr-1" style="background-color: #bfdbfe; border-color: #3b82f6;"></span> Intermediate</div>
                <div class="flex items-center">
                    <span
                        class="w-3 h-3 rounded-full border-2 mr-1 relative flex items-center justify-center" style="background-color: #86efac; border-color: #22c55e;">
                        <span class="w-1.5 h-1.5 border-2 rounded-full absolute" style="border-color: #22c55e;"></span>
                    </span>
                    End Word
                </div>
                <div class="flex items-center"><span
                        class="w-3 h-3 bg-orange-400 rounded-full border border-orange-600 mr-1"></span> Active Path
                </div>
            </div>
        </div>
    </header>

    <main class="flex-grow flex flex-col lg:flex-row h-full overflow-hidden">

        <!-- Controls Sidebar -->
        <aside
            class="w-full lg:w-1/4 bg-white border-r border-gray-200 flex flex-col p-6 shadow-[4px_0_24px_rgba(0,0,0,0.02)] z-10 overflow-y-auto">

            <!-- Add Words Section -->
            <div class="mb-6">
                <h2 id="submitHeading" class="text-sm font-semibold uppercase tracking-wider text-gray-500 mb-3">Submit Word List</h2>
                <textarea id="bulkWordsInput" rows="6" placeholder="Enter words separated by commas or new lines"
                    class="w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent mb-3"></textarea>
                <button id="submitWordsBtn"
                    class="w-full bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors disabled:bg-gray-400 disabled:cursor-not-allowed disabled:hover:bg-gray-400">
                    Submit Words
                </button>
            </div>

            <!-- Simulation Section -->
            <div class="mb-6 hidden" id="autocompleteSection">
                <h2 class="text-sm font-semibold uppercase tracking-wider text-gray-500 mb-3">Test Autocomplete</h2>
                <div class="relative">
                    <input type="text" id="searchInput" placeholder="Type to traverse..."
                        class="w-full border-2 border-indigo-100 rounded-lg px-4 py-3 text-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-800 placeholder-gray-300">
                    <div class="absolute right-3 top-3 text-gray-400">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                    </div>
                </div>
                <div class="mt-2 text-sm text-gray-600 min-h-[20px]">
                    Matches: <span class="font-mono text-indigo-600" id="matchesText">-</span>
                </div>
            </div>

            <hr class="border-gray-100 mb-6 hidden" id="divider">

            <div id="currentWordsSection" class="hidden">
                <h3 class="text-xs font-semibold text-gray-600 mb-2">Current Words:</h3>
                <div class="word-list-container h-32 overflow-y-auto border border-gray-100 rounded bg-gray-50 p-2 mb-6">
                    <div id="wordList" class="flex flex-wrap gap-2 text-gray-400 text-xs">
                        Awaiting submission...
                    </div>
                </div>
            </div>

            <button id="resetBtnTop" class="hidden w-full py-2 text-sm text-red-500 hover:bg-red-50 rounded border border-red-200 transition-colors">
                Clear All Words
            </button>
        </aside>

        <!-- Visualization Area -->
        <section class="flex-1 bg-gray-50 relative h-[500px] lg:h-auto overflow-hidden flex">
            <!-- Main Trie -->
            <div class="flex-1 relative border-r border-gray-200">
                <div id="viz-container" class="w-full h-full"></div>
                <div class="absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded shadow border border-gray-200 text-xs font-semibold text-gray-700">
                    Full Trie
                </div>
            </div>

            <!-- Minimized Trie -->
            <div class="flex-1 relative">
                <div id="viz-container-mini" class="w-full h-full"></div>
                <div class="absolute top-4 left-4 bg-white/90 backdrop-blur px-3 py-1 rounded shadow border border-gray-200 text-xs font-semibold text-gray-700">
                    Minimized Trie (Draft)
                </div>
            </div>

            <!-- Legend/Instructions -->
            <button id="resetViewBtn" 
                class="absolute bottom-4 left-4 bg-white/90 backdrop-blur px-4 py-2 rounded shadow border border-gray-200 text-xs font-semibold text-gray-700 hover:bg-white transition-colors cursor-pointer">
                Reset View
            </button>
            <div
                class="absolute bottom-4 right-4 bg-white/90 backdrop-blur p-3 rounded shadow border border-gray-200 text-xs max-w-xs pointer-events-none">
                <p class="font-semibold mb-1">Interactive Controls:</p>
                <ul class="list-disc list-inside text-gray-600 space-y-1">
                    <li>Scroll to Zoom</li>
                    <li>Click & Drag to Pan</li>
                    <li>Type to trace paths</li>
                </ul>
            </div>
        </section>

    </main>
</body>

</html>